---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: SecurityPolicy
metadata:
  name: envoy-gateway-security
  namespace: network
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: Gateway
    name: external
  cors:
    allowOrigins:
      - "https://*.${SECRET_DOMAIN}"
    allowMethods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allowHeaders:
      - "Accept"
      - "Accept-Language"
      - "Authorization"
      - "Cache-Control"
      - "Content-Type"
      - "DNT"
      - "Origin"
      - "User-Agent"
      - "X-Requested-With"
      - "X-Forwarded-For"
      - "X-Forwarded-Proto"
      - "X-Real-IP"
      - "X-CSRF-Token"
      - "X-API-Key"
      - "X-Auth-Token"
      - "X-Client-Version"
      - "X-Device-ID"
      - "X-Session-ID"
      - "X-Timezone"
      - "X-Timezone-Offset"
    exposeHeaders:
      - "Content-Length"
      - "Content-Range"
      - "Content-Disposition"
      - "X-Total-Count"
      - "X-Page-Count"
      - "X-Current-Page"
      - "X-Rate-Limit-Limit"
      - "X-Rate-Limit-Remaining"
      - "X-Rate-Limit-Reset"
    allowCredentials: true
    maxAge: "24h"
